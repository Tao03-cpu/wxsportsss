<!-- é¡µé¢ï¼šæˆ‘çš„éƒ¨è½ï¼ˆmyTribeï¼‰ -->
<view class="container">
  
  <!-- 1. å¤´éƒ¨æŒ‰é’® -->
  <view class="header-actions" style="display: flex; justify-content: flex-end; padding-bottom: 10rpx;">
    <view class="link-btn" bindtap="goToManage">ğŸ” å‘ç°æ›´å¤šéƒ¨è½</view>
  </view>

  <!-- 2. å·²åŠ å…¥çš„éƒ¨è½ -->
  <view class="section">
    <view class="title">æˆ‘çš„éƒ¨è½ <text class="tip">(é•¿æŒ‰å¯é€€å‡º)</text></view>
    
    <block wx:if="{{myTribes.length > 0}}">
      <view class="tribe-item" wx:for="{{myTribes}}" wx:key="_id" 
            bindtap="enterChat" bindlongpress="onLongPressTribe"
            data-id="{{item._id}}" data-name="{{item.name}}" data-role="{{item.myRole}}">
        <view class="icon">
          <image wx:if="{{item.logoUrl}}" src="{{item.logoUrl}}" mode="aspectFill" class="tribe-img"></image>
          <text wx:else>{{item.icon}}</text>
        </view>
        <view class="info">
          <view class="name">
            {{item.name}}
            <text class="role-tag" wx:if="{{item.myRole}}">{{item.myRole}}</text>
          </view>
          <view class="desc">{{item.slogan || 'æš‚æ— å£å·'}}</view>
        </view>
        <view class="arrow">è¿›å…¥ ></view>
      </view>
    </block>

    <view wx:elif="{{!isLoading}}" class="empty">
      æš‚æœªåŠ å…¥ä»»ä½•éƒ¨è½
    </view>
  </view>

  <!-- 3. æ¨èéƒ¨è½ -->
  <view class="section">
    <view class="title">æ¨èéƒ¨è½</view>
    <block wx:for="{{recommends}}" wx:key="id">
      <view class="tribe-item">
        <view class="icon">
          <text>{{item.icon}}</text>
        </view>
        <view class="info">
          <view class="name">{{item.name}}</view>
          <view class="desc">{{item.desc}}</view>
        </view>
        <button size="mini" class="btn-join" bindtap="joinRecommends" data-item="{{item}}">åŠ å…¥</button>
      </view>
    </block>
  </view>

  <!-- æ‚¬æµ®åˆ›å»ºæŒ‰é’® -->
  <view class="fab-btn" bindtap="showCreateModal">
    <text>+</text>
  </view>

</view>
