<!-- é¡µé¢ï¼šæˆ‘çš„éƒ¨è½ï¼ˆmyTribeï¼‰ -->
<view class="container">

  <!-- 1. å¤´éƒ¨æŒ‰é’® -->
  <view class="header-actions" style="display: flex; justify-content: flex-end; padding-bottom: 10rpx;">
  <!-- è·³è½¬åˆ°tribeManageé¡µé¢  bindtap:ç‚¹å‡»äº‹ä»¶ -->
    <view class="link-btn" bindtap="goToManage">ğŸ” å‘ç°æ›´å¤šéƒ¨è½</view>
  </view>

  <!-- 2. å·²åŠ å…¥çš„éƒ¨è½ -->
  <view class="section">
    <view class="title">æˆ‘çš„éƒ¨è½
    <text class="tip">ï¼ˆé•¿æŒ‰å¯é€€å‡ºï¼‰
    </text>
  </view>
    <!-- å¦‚æœç”¨æˆ·å·²ç»åŠ å…¥éƒ¨è½ -->
    <block wx:if="{{myTribes.length > 0}}">
<!-- éå†éƒ¨è½åˆ—è¡¨ï¼Œwx:for å¾ªç¯æ¸²æŸ“éƒ¨è½ wx:key æé«˜æ¸²æŸ“æ€§èƒ½ï¼Œä½¿ç”¨æ•°æ®åº“_id -->
      <view class="tribe-item" wx:for="{{myTribes}}" wx:key="_id"
         
            bindtap="enterChat" 
            
            bindlongpress="onLongPressTribe"
            
            data-id="{{item._id}}" data-name="{{item.name}}" data-role="{{item.myRole}}">
        <!-- éƒ¨è½å›¾æ ‡ -->
        <view class="icon">
        <!-- å¦‚æœæœ‰éƒ¨è½å¤´åƒï¼Œæ˜¾ç¤ºå›¾ç‰‡ -->
          <image wx:if="{{item.logoUrl}}" src="{{item.logoUrl}}" mode="aspectFill" class="tribe-img">
          </image>
          <text wx:else>{{item.icon}}</text>
        </view>
<!-- éƒ¨è½ä¿¡æ¯ -->
        <view class="info">
          <view class="name">
            {{item.name}}
             <!-- æ˜¾ç¤ºæˆ‘åœ¨éƒ¨è½ä¸­çš„è§’è‰²ï¼ˆæ—é•¿ / æˆå‘˜ï¼‰ -->
            <text class="role-tag" wx:if="{{item.myRole}}">{{item.myRole}}</text>
          </view>
          <view class="desc">{{item.slogan || 'æš‚æ— å£å·'}}</view>
        </view>
        <view class="arrow">è¿›å…¥ ></view>
      </view>
    </block>

    <view wx:elif="{{!isLoading}}" class="empty">
      æš‚æœªåŠ å…¥ä»»ä½•éƒ¨è½
    </view>
  </view>

  <!-- 3. æ¨èéƒ¨è½ -->
  <view class="section">
    <view class="title">æ¨èéƒ¨è½</view>
    <!-- éå†æ¨èéƒ¨è½åˆ—è¡¨ -->
    <block wx:for="{{recommends}}" wx:key="id">
      <view class="tribe-item">
        <view class="icon">
          <text>{{item.icon}}</text>
        </view>
        <!-- æ¨èéƒ¨è½ä¿¡æ¯ -->
        <view class="info">
          <view class="name">{{item.name}}</view>
          <view class="desc">{{item.desc}}</view>
        </view>
        <button size="mini" class="btn-join" bindtap="joinRecommends" data-item="{{item}}">åŠ å…¥</button>
      </view>
    </block>
  </view>

  <!-- æ‚¬æµ®åˆ›å»ºæŒ‰é’® -->
  <view class="fab-btn" bindtap="showCreateModal">
    <text>+</text>
  </view>

</view>
